<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart — EMMY APPAREL</title>
    <link rel="stylesheet" href="styles/index.css" />
    <link rel="stylesheet" href="styles/cart.css" />
    <script defer src="scripts/cart.js"></script>
    <style>
      /* Add black shadow to cart rows rendered by JS */
      .cart-row.shadow-black{ box-shadow: 0 16px 40px rgba(0,0,0,0.30) !important; }
      .cart-row.shadow-black:hover{ box-shadow: 0 22px 56px rgba(0,0,0,0.36) !important; transform: translateY(-4px); }
      /* Empty cart image: show at near-full size but slightly smaller, keep aspect ratio */
      .cart-empty .emptycart-img {
        width: 320px;
        max-width: 86%;
        height: auto;
        object-fit: contain;
        display: block;
        margin: 0 0 12px auto; /* align right by default, center if necessary */
        border-radius: 6px;
      }
        /* Close button: circular, subtle shadow, slightly lowered */
        .close-btn {
          background: #000;
          color: #fff;
          width: 44px;
          height: 44px;
          display: inline-flex;
          align-items: center;
          justify-content: center;
          font-size: 20px;
          line-height: 1;
          border: none;
          border-radius: 50%;
          box-shadow: 0 6px 18px rgba(0,0,0,0.18);
          cursor: pointer;
          margin-top: 50px; /* bring down a bit */
          margin-left: 6px;
          font-weight: 700;
          transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
        }
        .close-btn:hover { transform: translateY(0); box-shadow: 0 10px 22px rgba(0,0,0,0.22); opacity: 0.98; }
        .close-btn:focus { outline: 3px solid rgba(0,0,0,0.12); }
    </style>
  </head>
  <body>
    <div class="container">
      <header class="header">
        <!-- Close button replaces logo: returns user to previous page/referrer -->
        <button class="close-btn" aria-label="Close cart">×</button>
        <div class="icons-right">
          <a class="notif-btn" href="cart.html" aria-label="Cart" aria-haspopup="true" aria-expanded="false">
            <img src="icons/cart.svg" alt="Cart" width="20" height="20" aria-hidden="true" />
            <span class="notif-badge" aria-hidden="false">0</span>
          </a>
        </div>
      </header>

      <main class="main-content" tabindex="-1">
        <section class="cart-section">
          <h1 class="cart-title">Cart</h1>

          <!-- Primary 'Continue shopping' CTA shown when cart has items -->
          <div style="margin-bottom:12px; display:none;" id="continue-shopping-wrap">
            <a id="continue-shopping-btn" class="buy-now-btn" href="index.html" style="display:inline-block;">Continue shopping</a>
          </div>

          <div id="cart-list" class="cart-list">
            <!-- cart rows rendered by scripts/cart.js -->
          </div>

          <!-- Empty cart message (placed above Address) -->
          <div class="cart-empty" id="cart-empty" hidden>
            <img src="images/emptycart.jpg" alt="Empty cart" class="emptycart-img" />
          
            <h3>Your cart is empty</h3>
            <p>Browse our collections and add items to the cart.</p>
            <a class="buy-now-btn" href="index.html">Continue shopping</a>
          </div>

          <section class="address-section">
            <h2 class="section-label">Address</h2>
            <div class="address-panel">
              <input id="address-field" class="address-field" type="text" placeholder="Add delivery address" value="1770 S Harbor Blvd. Ste 140, Anaheim, CA" />
              <a class="muted-link" href="#" id="add-address">+ Add new address</a>
            </div>
          </section>

          <!-- removed duplicate muted continue link; primary orange button above list used instead -->

          <aside class="cart-summary">
            <div class="summary-inner">
              <div class="summary-title">Order Summary</div>
          
              <div class="summary-divider"></div>
              <div class="summary-row total">
                <strong>Total</strong>
                <strong id="total">₦0</strong>
              </div>
              <div class="summary-actions">
                <button id="checkout-btn" class="process-btn" disabled>Process Transaction</button>
                <button id="clear-cart" class="add-cart-btn">Clear cart</button>
              </div>
            </div>
          </aside>
        </section>
        <!-- Mobile bottom checkout bar (visible on small screens) -->
        <div class="cart-checkout-bar" id="cart-checkout-bar">
          <div class="checkout-inner">
            <div class="checkout-total">
              <div class="label">Total</div>
              <div id="checkout-total-amt" class="value">₦0</div>
            </div>
            <button id="checkout-btn-mobile" class="process-btn" disabled>Process Transaction</button>
          </div>
        </div>
      </main>
  		<script src="scripts/dynamic.js" defer></script>
  		<script>
  		// Close button: navigate back to referrer or history, fallback to home
  		(function(){
  		  document.addEventListener('DOMContentLoaded', function(){
  		    var btn = document.querySelector('.close-btn');
  		    if (!btn) return;
  		    btn.addEventListener('click', function(e){
  		      e.preventDefault();
  		      try {
  		        if (document.referrer && document.referrer.indexOf(location.origin) === 0) {
  		          window.location.href = document.referrer; return;
  		        }
  		      } catch (err) {}
  		      try { history.back(); setTimeout(function(){ if (!document.hidden) { /* nothing */ } }, 250); }
  		      catch (e) { window.location.href = 'index.html'; }
  		      // final fallback after a short delay
  		      setTimeout(function(){ if (location.pathname.indexOf('cart.html') !== -1) window.location.href = 'index.html'; }, 600);
  		    });
  		  });
  		})();
  		</script>
    </div>
  </body>
</html>
